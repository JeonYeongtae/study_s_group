# [ 1주차 | DB | JSY ]

# 📝데이터베이스

## 6.1 데이터베이스의 큰 그림

### 📌 데이터베이스(Database)란?

- **정의**: 데이터를 구조화된 형태로 저장하고, 필요한 정보를 효율적으로 검색·수정·삭제할 수 있도록 도와주는 **정보 저장소**.
- 현실 세계의 데이터를 **논리적으로 모델링**하여 표현함.

---

### 📌 DBMS(Database Management System)

- **정의**: 데이터베이스를 **생성, 조회, 수정, 삭제(CRUD)** 하는 기능을 제공하는 소프트웨어.
- 사용자 → 애플리케이션 → DBMS → 데이터베이스로 요청이 전달됨.

### 🔸 대표적인 DBMS:

- **오픈소스**: MySQL, PostgreSQL, MariaDB
- **상용**: Oracle, Microsoft SQL Server

---

### 📌 파일 시스템과 DBMS의 차이

| 항목          | 파일 시스템        | DBMS                                |
| ------------- | ------------------ | ----------------------------------- |
| 중복 제어     | 불가능             | 가능 (정규화로 해결)                |
| 보안          | 개발자가 직접 구현 | 사용자·역할 기반 보안 체계 내장     |
| 동시성 제어   | 어려움             | 트랜잭션 처리 및 잠금 메커니즘 존재 |
| 복구          | 어려움             | 자동 백업/복구 기능 제공            |
| 데이터 무결성 | 수동 검증 필요     | 제약 조건으로 자동 보장             |

---

### 📌 트랜잭션(Transaction)

- 데이터베이스에서의 하나의 **논리적 작업 단위**.
- 예: 계좌 이체 = 출금 + 입금 → 이 두 작업은 **전부 실행되거나**, **전부 취소되어야 함**.

### 🔸 트랜잭션의 4가지 성질: **ACID**

| 속성                     | 설명                                                                             |
| ------------------------ | -------------------------------------------------------------------------------- |
| **Atomicity (원자성)**   | 트랜잭션은 **모두 성공**하거나, **모두 실패**해야 함. 부분 성공은 허용되지 않음. |
| **Consistency (일관성)** | 트랜잭션이 완료되면 데이터는 항상 **일관성 있는 상태**를 유지해야 함.            |
| **Isolation (고립성)**   | 동시에 실행되는 트랜잭션은 **서로 간섭하면 안 됨**. 독립적으로 처리됨.           |
| **Durability (지속성)**  | 트랜잭션이 성공적으로 끝나면 그 결과는 **영구 저장**되어야 함.                   |

---

## 🔹 6.2 RDBMS의 기본

### 📌 RDBMS (Relational Database Management System)

- **관계형 데이터베이스**는 데이터를 **테이블 형태**로 저장.
- 각 테이블은 **행(row, 튜플)**과 **열(column, 속성)**으로 구성됨.

---

### 📌 테이블(Table)

- 현실 세계의 엔터티(Entity)를 모델링한 것.
- 예: 고객(Customer), 주문(Order), 제품(Product) 등.
- 각 테이블은 **스키마(Schema)**라는 구조를 따름.

```

고객 테이블 예제
+---------+----------+------------+
| id(PK)  | name     | email      |
+---------+----------+------------+
| 1       | 철수     | cs@example |
| 2       | 영희     | yh@example |
+---------+----------+------------+

```

---

### 📌 기본 키(Primary Key)

- 각 행을 **고유하게 식별**하는 열 또는 열들의 조합.
- 중복 불가, NULL 불가
- 한 테이블에 **하나만 존재**

```sql
-- User 테이블 생성
CREATE TABLE User (
  id INT PRIMARY KEY,
  name VARCHAR(100)
);

```

---

### 📌 외래 키(Foreign Key)

- 다른 테이블의 기본 키를 참조하는 열.
- 테이블 간의 **관계를 연결**함.
- 외래 키를 통해 **데이터의 일관성**을 유지할 수 있음.

```sql
-- Order 테이블 생성(외래키 예제)
CREATE TABLE Orders (
  id INT PRIMARY KEY,
  user_id INT,
  FOREIGN KEY (user_id) REFERENCES User(id)
);

```

---

### 📌 관계(Relationship)

- 테이블 간의 연결 구조.

| 관계 유형 | 설명                                           | 예시                           |
| --------- | ---------------------------------------------- | ------------------------------ |
| 1:1       | 한 레코드가 다른 테이블의 한 레코드와만 연결됨 | 사용자 - 사용자 상세정보       |
| 1:N       | 한 레코드가 여러 레코드와 연결됨               | 사용자 - 주문                  |
| N:M       | 여러 레코드가 서로 다수와 연결됨               | 학생 - 강의 (중간 테이블 필요) |

---

### 📌 무결성 제약 조건 (Integrity Constraints)

- 데이터의 정확성과 일관성을 보장하는 규칙들.

| 제약 조건     | 설명                  |
| ------------- | --------------------- |
| `PRIMARY KEY` | 고유값, NULL 불가     |
| `FOREIGN KEY` | 다른 테이블의 키 참조 |
| `NOT NULL`    | NULL 허용하지 않음    |
| `UNIQUE`      | 고유한 값이어야 함    |
| `CHECK`       | 조건에 맞는 값만 허용 |
| `DEFAULT`     | 기본값 설정           |

---

### 📌 SQL 기초 (보충 이해용)

- 테이블 생성

  ```sql

  CREATE TABLE Student (
    id INT PRIMARY KEY,
    name VARCHAR(100),
    age INT CHECK (age >= 0)
  );
  ```

- 기본 조회

  ```sql
  -- Student 테이블에서 age가 20보다 큰 데이터
  SELECT * FROM Student WHERE age > 20;

  ```

- 삽입
  ```sql
  -- 데이터 삽입 예제
  INSERT INTO Student VALUES (1, '철수', 21);
  ```
- 외래 키 제약
  ```sql
  -- 외래키 제약 조건 설정
  FOREIGN KEY (student_id) REFERENCES Student(id)
  ```

---

## 🔍 마무리 요약

| 핵심 키워드  | 설명                             |
| ------------ | -------------------------------- |
| 데이터베이스 | 구조화된 데이터 저장소           |
| DBMS         | 데이터베이스 관리 시스템         |
| 트랜잭션     | 일관성 보장하는 작업 단위 (ACID) |
| RDBMS        | 테이블 기반 데이터베이스         |
| 테이블       | 행과 열로 구성된 데이터 집합     |
| Primary Key  | 유일 식별자(NOT NNULL)           |
| Foreign Key  | 테이블 간 관계 연결              |
| 무결성 제약  | 데이터 정확성/일관성 유지        |
